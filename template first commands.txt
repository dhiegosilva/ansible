PROXMOX
#change repo to non subscriber repo
sed -i 's/^deb/#deb/' /etc/apt/sources.list.d/pve-enterprise.list /etc/apt/sources.list.d/ceph.list && echo "deb http://download.proxmox.com/debian/pve bookworm pve-no-subscription" > /etc/apt/sources.list.d/pve-no-subscription.list

#add to crontab
(echo "0 5 * * 1 apt-get update && apt-get dist-upgrade -y && apt-get autoremove -y && apt-get autoclean -y && if [ -f /var/run/reboot-required ]; then reboot; fi >> /var/log/proxmox-autoupdate.log 2>&1") | crontab -


Rockylinux base for ansible

dnf upgrade -y && dnf install -y python3 nano && \
dnf install -y openssh-server && \
systemctl enable sshd && \
sed -i '/^#*PermitRootLogin/s/^#*PermitRootLogin.*/PermitRootLogin yes/' /etc/ssh/sshd_config && \
reboot


Alpine template base

apk add --no-cache openssh python3 nano && \
sed -i '/^#*PermitRootLogin/s/^#*PermitRootLogin.*/PermitRootLogin yes/' /etc/ssh/sshd_config && \
rc-update add sshd && \
service sshd start && \
adduser -D dhiego && \
echo "dhiego:f4x4d8p6" | chpasswd


Ansible run command

rm /root/.ssh/known_hosts
source ~/ansible-env/bin/activate

ANSIBLE_HOST_KEY_CHECKING=False ansible-playbook -i hosts.ini alpine-docker.yml


Ubuntu ()
sudo apt update && sudo apt install -y python3 curl && sudo sed -i '/^#*PermitRootLogin/s/^#*PermitRootLogin.*/PermitRootLogin yes/' /etc/ssh/sshd_config && sudo systemctl restart ssh